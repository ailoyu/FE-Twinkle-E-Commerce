<app-header></app-header>
<div class="edit-overall">
    
<div class="dashboard">
    <app-admin-dashboard></app-admin-dashboard>
    <div class="container twinkle">
        <div class="confirmation-container">
            <h1>Orders history</h1>
            <p>Below is detailed information about this customer's orders: </p>     
        </div>
<div class="row twinke" style="padding-left: 30px;">
    <h1 style="font-family: Oswald, sans-serif;
    padding-bottom: 10px;
    text-align: center;">Total value of all orders: ${{totalValueOfOrders | number:'1.2-2'}}</h1>

    <table *ngFor="let order of getOrder" class="mb-3 twinkle">
        <thead>
            <tr (click)="toggleBodyAndFooter(order.id)" style="cursor: pointer;">
                <div style="background-color: rgb(101, 102, 172);">
                    <th scope="col" class="text-start-first">Orders with Order ID: {{order.id}}</th>
                    <th scope="col" class="text-start-second">Order date: {{order.orderDate}} </th>
                    <th scope="col" class="text-start-third">Delivery date: {{order.shippingDate}}</th>
                </div>
            </tr>
        </thead>
        <tbody *ngIf="selectedOrder === order.id">
            <div style="color: white;">
                <h2>Customer's information</h2>
                <p><span>Customer's name:</span> {{order.fullName}}</p>
                <p><span>Email:</span> {{order.email}}</p>
                <p><span>Phone number:</span> {{order.phoneNumber}}</p>
                <p><span>Address:</span> {{order.address}}</p>
                <p><span>Note:</span> {{order.note}}</p>
                <p><span></span>Payment method: {{order.paymentMethod}}</p>
                <p><span>Delivery method:</span> {{order.shippingMethod}}</p>
                <p><span>Order's status:</span> {{order.status}}</p>
            </div>
            <hr>
            <h2>Products ordered</h2>
            <table>
            <tr>
                <th scope="col" class="text-start">Products</th>
                <th scope="col">Size</th>
                <th scope="col">Quantity</th>
                <th scope="col">Unit price</th>
                <th scope="col">Total price</th>
            </tr>
            <tr *ngFor="let orderDetail of order.orderDetails">
                <td>
                    <div class="product-info" (click)="onProductClick(orderDetail.product.id)">
                        <img [src]="orderDetail.product.thumbnail" alt="Product Image" class="product-image">
                        <span class="product-name">{{orderDetail.product.name}}</span>
                    </div>
                </td>
                <td>{{orderDetail.size}}</td>
                <td>{{orderDetail.numberOfProducts}}</td>
                <td>${{orderDetail.productPrice | number:'1.2-2'}}</td>
                <td>${{orderDetail.productPrice * orderDetail.numberOfProducts | number:'1.2-2'}}</td>
            </tr>
        </table>
        </tbody>
        <tfoot *ngIf="selectedOrder === order.id">
            <tr>
                <td colspan="4" class="text-end">
                    <h4 class="header-text">Total Order: ${{order.totalMoney | number:'1.2-2'}}</h4>
                </td>
            </tr>
        </tfoot>
    </table>  
</div>  
</div>  
</div>
</div>
<app-footer></app-footer>